<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>弹幕配置</title>
    <script src="../js/jquery.js"></script>
    <script src="../js/mdui.js"></script>
    <script src="../js/magical_danmaku.js"></script>
    <link rel="stylesheet" href="../css/mdui.css" />
</head>

<body style="margin: 20px;">
    <h1>弹幕样式设置</h1>

    <div>
        <label class="mdui-checkbox">
            <input type="checkbox" id='showUname' />
            <i class="mdui-checkbox-icon"></i>
            显示昵称
        </label>
    </div>

    <div>
        <label class="mdui-checkbox">
            <input type="checkbox" id='showBubble' />
            <i class="mdui-checkbox-icon"></i>
            显示气泡
        </label>
    </div>

    <div style='margin-top: 20px;'>
        <div>最大弹幕数量</div>
        <div>
            <label class="mdui-slider mdui-slider-discrete">
                <input id='msgCount' type="range" step="1" min="1" max="100" />
            </label>
        </div>
    </div>

    <div style='margin-top: 20px;'>
        <div>最大显示秒数</div>
        <div>
            <label class="mdui-slider mdui-slider-discrete">
                <input id='showTime' type="range" step="1" min="3" max="300" />
            </label>
        </div>
    </div>


    <script type="text/javascript">
        configGroup = 'danmu';

        function readConfig(data) {
            if (data['showUname'] == true)
                $('#showUname').attr("checked", true);
            if (data['showBubble'] == true)
                $('#showBubble').attr("checked", true);
            if (typeof (data['msgCount']) != undefined)
                $('#msgCount').val(data['msgCount']);
            if (typeof (data['showTime']) != undefined)
                $('#showTime').val(data['showTime']);
            mdui.updateSliders();
        }

        addCheckEvent('showUname');
        addCheckEvent('showBubble');
        addSpinEvent('msgCount');
        addSpinEvent('showTime');

        function addCheckEvent(id) {
            $('#' + id).click(function () {
                saveConfig(id, $(this).is(':checked'));
            });
        }

        function addSpinEvent(id) {
            $('#' + id).change(function () {
                saveConfig(id, $(this).val());
            });
        }

    </script>
</body>

</html>